# Miden node

This crate contains a binary for running a Miden rollup faucet.

## Running the faucet in testing mode

> [!TIP]
> Miden account generation uses a proof-of-work puzzle to prevent DoS attacks. These puzzles can be quite expensive, especially for test purposes. You can lower the difficulty of the puzzle by appending `--features testing` to the `cargo install ..` invocation.

1. Run a local node with the "testing" feature, for example using the docker image. From the "miden-node" repo root run the following commands:
```bash
make docker-build-node
make docker-run-node
```

2. Install the faucet (with the "testing" feature):
```bash
make install-faucet-testing
```

3. [Optional] Create faucet account (skip this step if you want to use an account from the genesis). This will generate authentication keypair and generate and write public faucet account data with its keypair into the file specified in `output-path`: 

```bash
miden-faucet create-faucet-account \
  --output-path <path to faucet.mac> \
  --token-symbol POL \
  --decimals 9 \
  --max-supply 1000000000
```
> [!TIP]
> This account will not be created on chain yet, creation on chain will happen on the first minting transaction.

4. Create the default faucet configuration file. Specify the path to the faucet account file created on the previous step in the `-f` flag (if you want to use an account from the genesis, specify the path to the `faucet.mac` file generated by the [make-genesis](../../README.md#setup) command of the Miden node):
```bash
miden-faucet init -f <path to faucet.mac>
```

5. Start the faucet server:
```bash
miden-faucet start
```

After a few seconds you may go to `http://localhost:8080` and see the faucet UI.

## License
This project is [MIT licensed](../../LICENSE).
