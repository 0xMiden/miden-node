// Specification of the user facing gRPC API.
syntax = "proto3";
package validator;

import "types/transaction.proto";
import "types/blockchain.proto";
import "google/protobuf/empty.proto";

// VALIDATOR API
// ================================================================================================

// Validator API for the Validator component.
service Api {
   // Returns the status info of the validator.
   rpc Status(google.protobuf.Empty) returns (ValidatorStatus) {}

   // Submits a transaction to the validator.
   rpc SubmitProvenTransaction(transaction.ProvenTransaction) returns (google.protobuf.Empty) {}

   // Validates and signs a block.
   rpc ValidateBlock(blockchain.Block) returns (SignedBlock);
}

// Block that has been validated and signed by the validator.
message SignedBlock {
    blockchain.Block block = 1;
    bytes signature = 2;
}

// STATUS
// ================================================================================================

// Represents the status of the validator.
message ValidatorStatus {
    // The validator's running version.
    string version = 1;

    // The validator's status.
    string status = 2;
}
